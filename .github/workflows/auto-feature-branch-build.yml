name: Auto Feature/Fix Branch Build

on:
  push:
    branches:
      - 'MT-**'

env:
  AC_USER: Warm_App2
  AC_APP_ANDROID: android_prod
  AC_APP_IOS: ios_production
  CONFIG_BRANCH: feature-branch-config

jobs:
  run-build-on-appcenter:
    name: Feature/Fix Branch Build
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Build
        uses: ./.github/actions/appcenter
        with:
          appcenter_user: ${{ env.AC_USER }}
          appcenter_app: ${{ env.AC_APP_IOS }}
          branch_name: ${{ github.ref }}
          settings_branch_name: ${{ env.CONFIG_BRANCH }}
          appcenter_token: ${{ secrets.APP_CENTER_ACCESS_TOKEN }}x
